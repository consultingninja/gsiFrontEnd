<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="referrer" content="no-referrer-when-downgrade">

  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script>
    async function decodeResponse(credential) {
      const url = new URL('http://127.0.0.1:3000/oauth');
      url.searchParams.append('code',credential);
      const localReq = await fetch(url);
      const data = await localReq.json();
      return data 

    }
    async function handleAuth(response) {
      const responsePayload = await decodeResponse(response.credential);
      console.log('responsePayload', responsePayload);
      //console.log('Response', response);
    }

    async function getKeys(){
      const keys = await fetch('http://127.0.0.1:3000/getkeys');
      const data = await keys.json();
      console.log('data',data);
    }
  </script>
  
  <title>Consulting Ninja HTMLAUTH</title>

  <!-- Additional CSS and JavaScript files can be linked here -->
  <style>
    main{
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    button{
      margin-top:.25em;
    }
  </style>
</head>
<body>
  <!-- Content of the web page goes here -->

  <header>
    <!-- Header content -->
  </header>

  <nav>
    <!-- Navigation menu or links -->
  </nav>

  
  <main>
      <!-- Main content of the page -->
    <h1>Welcome to Consulting Ninja!</h1>
    <h3>Google GSI!?</h3>
    <p>
      Visit
      <a href="https://www.youtube.com/@ConsultingNinja/featured">
        <strong>@ConsultingNinja</strong>
      </a>
      to see more great videos!
      <div id="g_id_onload"
      data-client_id="889328097452-apc17iqi6rqghmvahr156kepoduhddro.apps.googleusercontent.com"
      data-context="signin"
      data-ux_mode="popup"
      data-callback="handleAuth"
      data-auto_prompt="false">
 </div>
 
 <div class="g_id_signin"
      data-type="standard"
      data-shape="rectangular"
      data-theme="outline"
      data-text="signin_with"
      data-size="large"
      data-logo_alignment="left">
 </div>


 <!-- <button type="button" onclick="getKeys()">My life sucks</button> -->
    </p>

  </main>

  <footer>
    <!-- Footer content -->
  </footer>

  <!-- Additional scripts can be placed here -->
</body>
</html>

